const concerns=["OFDB","Missing Content","Idol Time","404","Orch Entry Missing","Mintfy CSS/JS","Darkmode","Do Not Sell","Permalink","Dropdown","Hover","DSHRBD/SEO","Cred Details Acc","Cookies","Fav Icon","Break Task","Check List","Page Not Found","?s-desc","Alt Value","Forms","Highlight","HTML & CSS Validation","Pages Trash","Feature","Dummy Img PREM","Banner","Fonts","Logo","Responsive","301","Gtrans","Theme"],devs=[{team:"KEPPEL",name:"Xaviery Batucan",remarks:"DEV 3"},{team:"KEPPEL",name:"Clariss Ann Ladica",remarks:"DEV 2"},{team:"TALISAY",name:"Lloyd Caesar Neri",remarks:"DEV 3"},{team:"TALISAY",name:"Rich Rhynor Austria",remarks:"DEV 2"},{team:"TALISAY",name:"Steve Wilben Saceda",remarks:"DEV 2"},{team:"TALISAY",name:"Jemuel Rivero",remarks:"DEV 2"},{team:"TALISAY",name:"Hachi Drake Merto",remarks:"DEV 2"},{team:"TALISAY",name:"Ian Jhon Cubatcha",remarks:"DEV 2"},{team:"PROBATIONARY",name:"Khirt Manatad",remarks:"6 MONTHS"},{team:"PROBATIONARY",name:"Don Johnson Atillo",remarks:"6 MONTHS"},{team:"PROBATIONARY",name:"Jahmel Anne Junto",remarks:"6 MONTHS"},{team:"PROBATIONARY",name:"Justin Romera",remarks:"3 MONTHS"},{team:"PROBATIONARY",name:"Jomar Jade Ballebas",remarks:"3 MONTHS"},{team:"PROBATIONARY",name:"Hinlorie RebaÃ±o",remarks:"3 MONTHS"}];let tableCount=0;function saveTables(){const allData=[];document.querySelectorAll(".table-wrapper").forEach(wrapper=>{const date=wrapper.querySelector("input[type='date']").value,rows=[];wrapper.querySelectorAll("tbody tr").forEach(tr=>{const checkboxes=Array.from(tr.querySelectorAll('input[type="checkbox"]')).map(cb=>cb.checked),comments=Array.from(tr.querySelectorAll("textarea")).map(txt=>txt.value);rows.push({checkboxes:checkboxes,comments:comments})}),allData.push({date:date,rows:rows})}),localStorage.setItem("devTablesData",JSON.stringify(allData)),localStorage.setItem("devTablesCount",tableCount)}function loadTables(){const savedTables=JSON.parse(localStorage.getItem("devTablesData")||"[]"),savedCount=parseInt(localStorage.getItem("devTablesCount")||"0");savedTables.length&&(tableCount=0,savedTables.forEach((tableData,index)=>{if(0===index){const wrapper=document.querySelector(".table-wrapper");wrapper.querySelector("input[type='date']").value=tableData.date,applyTableData(wrapper,tableData.rows),tableCount++}else{generateTable("tablesContainer");const wrapper=document.querySelectorAll(".table-wrapper")[index];wrapper.querySelector("input[type='date']").value=tableData.date,applyTableData(wrapper,tableData.rows)}}),tableCount=Math.max(tableCount,savedCount))}function applyTableData(wrapper,rowsData){wrapper.querySelectorAll("tbody tr").forEach((tr,rowIndex)=>{const rowData=rowsData[rowIndex];rowData&&(tr.querySelectorAll('input[type="checkbox"]').forEach((cb,i)=>cb.checked=rowData.checkboxes[i]),tr.querySelectorAll("textarea").forEach((txt,i)=>{txt.value=rowData.comments[i],tr.querySelectorAll("td")[3+i].classList.toggle("has-comment",""!==txt.value.trim())}),updateErrorCount(tr))}),updateColumnTotals(wrapper.querySelector("table").id)}function generateTable(containerId){tableCount++;const tableId=`devTable${tableCount}`,container=document.getElementById(containerId),wrapper=document.createElement("div");wrapper.className="table-wrapper",wrapper.style.marginBottom="25px";const dateDiv=document.createElement("div");dateDiv.style.marginBottom="10px";const dateLabel=document.createElement("label");dateLabel.textContent="Checklist Date:",dateLabel.style.marginRight="8px",dateLabel.style.fontWeight="bold";const dateInput=document.createElement("input");dateInput.type="date",dateInput.value=(new Date).toISOString().split("T")[0],dateDiv.append(dateLabel,dateInput),wrapper.appendChild(dateDiv);const table=document.createElement("table");table.id=tableId,table.innerHTML=`\n    <thead>\n      <tr>\n        <th rowspan="2">Hub</th>\n        <th rowspan="2">Devs Name</th>\n        <th rowspan="2">Remarks</th>\n        <th colspan="${concerns.length}">Concerns</th>\n        <th rowspan="2">Number of Dev Errors</th>\n      </tr>\n      <tr id="${tableId}-headers"></tr>\n    </thead>\n    <tbody id="${tableId}-body"></tbody>\n    <tfoot>\n      <tr id="${tableId}-totals">\n        <td colspan="3"><strong>Total Errors</strong></td>\n      </tr>\n    </tfoot>\n  `,wrapper.appendChild(table),container.appendChild(wrapper);const headerRow=document.getElementById(`${tableId}-headers`);concerns.forEach(c=>{const th=document.createElement("th");th.textContent=c,headerRow.appendChild(th)});const totalsRow=document.getElementById(`${tableId}-totals`);concerns.forEach(()=>{const td=document.createElement("td");td.className="column-total",td.textContent="0",totalsRow.appendChild(td)});const grandTotal=document.createElement("td");grandTotal.className="grand-total",grandTotal.textContent="0",totalsRow.appendChild(grandTotal);const devRowsContainer=document.getElementById(`${tableId}-body`);devs.forEach(dev=>{const tr=document.createElement("tr");tr.className=dev.team.toLowerCase(),tr.innerHTML=`\n      <td>${dev.team}</td>\n      <td>${dev.name}</td>\n      <td>${dev.remarks}</td>\n    `,concerns.forEach(()=>{const td=document.createElement("td");td.className="checkbox-cell";const checkbox=document.createElement("input");checkbox.type="checkbox";const comment=document.createElement("textarea");comment.className="comment-box",comment.placeholder="Add comment...",td.append(checkbox,comment),tr.appendChild(td)});const errorTd=document.createElement("td");errorTd.className="errors high",errorTd.textContent="0",tr.appendChild(errorTd),devRowsContainer.appendChild(tr)}),updateColumnTotals(tableId)}function updateErrorCount(row){const checkboxes=row.querySelectorAll('input[type="checkbox"]'),errorCell=row.querySelector(".errors"),checkedCount=Array.from(checkboxes).filter(cb=>cb.checked).length;errorCell.textContent=checkedCount,errorCell.style.color=0===checkedCount?"green":checkedCount<=5?"white":"red"}function updateColumnTotals(tableId){const table=document.getElementById(tableId),totals=Array(concerns.length).fill(0);table.querySelectorAll("tbody tr").forEach(row=>{row.querySelectorAll('input[type="checkbox"]').forEach((cb,i)=>{cb.checked&&totals[i]++})}),table.querySelectorAll(".column-total").forEach((cell,i)=>{cell.textContent=totals[i]}),table.querySelector(".grand-total").textContent=totals.reduce((a,b)=>a+b,0)}function attachAutoSave(wrapper){wrapper.addEventListener("change",e=>{if(e.target.matches('input[type="checkbox"]')||e.target.matches('input[type="date"]')){const row=e.target.closest("tr");row&&updateErrorCount(row),saveTables()}}),wrapper.addEventListener("input",e=>{if(e.target.matches("textarea")){const td=e.target.closest("td");td.classList.toggle("has-comment",""!==e.target.value.trim()),saveTables()}})}document.getElementById("addTableBtn").addEventListener("click",()=>generateTable("tablesContainer")),document.getElementById("saveTablesBtn").addEventListener("click",()=>{saveTables(),alert("All tables saved successfully!")}),generateTable("tablesContainer"),loadTables();